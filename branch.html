<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Capy Branch Deployments</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
      line-height: 1.6;
    }
    h1 {
      color: #333;
      border-bottom: 2px solid #e1e4e8;
      padding-bottom: 10px;
    }
    .info {
      background: #f6f8fa;
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      padding: 15px;
      margin: 20px 0;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 15px 0;
      padding: 15px;
      background: #fff;
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      transition: box-shadow 0.2s;
    }
    li:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    li.main-branch {
      background: #e6f7ff;
      border-color: #91d5ff;
    }
    .branch-link {
      font-size: 1.1em;
      font-weight: 600;
      color: #0366d6;
      text-decoration: none;
    }
    .branch-link:hover {
      text-decoration: underline;
    }
    .pr-info {
      margin-top: 5px;
      font-size: 0.9em;
      color: #586069;
    }
    .pr-link {
      color: #0366d6;
      text-decoration: none;
    }
    .pr-link:hover {
      text-decoration: underline;
    }
    .timestamp {
      font-size: 0.85em;
      color: #6a737d;
      margin-top: 5px;
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      font-size: 0.75em;
      font-weight: 600;
      border-radius: 12px;
      background: #28a745;
      color: white;
      margin-left: 8px;
    }
    .main-details {
      margin-top: 10px;
      font-size: 0.9em;
      color: #586069;
    }
    .commit-list {
      margin-top: 8px;
      padding-left: 15px;
      border-left: 2px solid #e1e4e8;
    }
    .commit-item {
      margin: 5px 0;
      font-size: 0.85em;
    }
    .commit-message {
      color: #24292e;
      font-weight: 500;
    }
    .commit-message a {
      font-family: 'Courier New', Courier, monospace;
      font-weight: 600;
    }
    .commit-author {
      color: #586069;
    }
  </style>
  <script>
    // Function to format timestamp to local timezone
    function formatLocalTime(timestamp) {
      if (!timestamp) return 'N/A';
      const date = new Date(timestamp);
      return date.toLocaleString(undefined, {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        timeZoneName: 'short'
      });
    }

    // Convert all timestamps to local timezone after page loads
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('[data-timestamp]').forEach(function(element) {
        const timestamp = parseInt(element.getAttribute('data-timestamp'));
        element.textContent = formatLocalTime(timestamp);
      });
    });
  </script>
</head>
<body>
  <h1>Capy Image Generator - Branch Deployments</h1>
  <div class="info">
    <strong>Note:</strong> The main branch is always deployed to the root.
    Other branches with open pull requests are deployed to subfolders.
    Branches are sorted by most recently updated first.
    All dates and times are shown in your local timezone.
  </div>
  <ul>
              <li class="main-branch">
                <a class="branch-link" href="./">main<span class="badge">PRODUCTION</span></a>
                <div class="pr-info">The main production branch - always deployed to root</div>
                <div class="main-details">
                  <div class="timestamp">Last commit: <span data-timestamp="1760442769000">1760442769000</span></div>
                  <div class="timestamp">Last deployment: <span data-timestamp="1760443709851">1760443709851</span></div>
                  <div class="commit-list">
<div class="commit-item"><div class="commit-message"><a class="pr-link" href="https://github.com/shthed/capy/commit/d219f7c7641fde7c81190aaff654761e68158da9">d219f7c</a> Merge pull request #118 from shthed/copilot/enhance-github-pages-deployment (<a class="pr-link" href="https://github.com/shthed/capy/pull/118">#118</a>)</div><div class="commit-author">by Hairy Dog Trumpet · <span data-timestamp="1760442769000">1760442769000</span></div></div>
<div class="commit-item"><div class="commit-message"><a class="pr-link" href="https://github.com/shthed/capy/commit/026445d5310832891495cc03f4011898469d8b5b">026445d</a> Add error handling for PR lookup failures (<a class="pr-link" href="https://github.com/shthed/capy/pull/118">#118</a>)</div><div class="commit-author">by Codex · <span data-timestamp="1760424239000">1760424239000</span></div></div>
<div class="commit-item"><div class="commit-message"><a class="pr-link" href="https://github.com/shthed/capy/commit/da37f983d61405561c838d756eb70b3d886cfc8c">da37f98</a> Enhance branch deployment with commit and PR links (<a class="pr-link" href="https://github.com/shthed/capy/pull/118">#118</a>)</div><div class="commit-author">by Codex · <span data-timestamp="1760424116000">1760424116000</span></div></div>
                  </div>
                </div>
              </li>
<li><a class="branch-link" href="copilot-enhance-github-pages-workflow-2/">copilot/enhance-github-pages-workflow-2</a><div class="pr-info">PR #119: Add clickable commit and PR links to branch deployment history - <a class="pr-link" href="https://github.com/shthed/capy/pull/119">View PR</a></div><div class="timestamp">Last updated: <span data-timestamp="1760443339000">2025-10-14T12:02:19Z</span></div></li>
  </ul>
</body>
</html>
